(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/canvasEdit"],{"20bd":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement;t._self._c},s=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return s})},2440:function(t,i,e){"use strict";var n=e("d049"),s=e.n(n);s.a},"7eb0":function(t,i,e){"use strict";e.r(i);var n=e("20bd"),s=e("b8d2");for(var a in s)"default"!==a&&function(t){e.d(i,t,function(){return s[t]})}(a);e("2440");var h=e("2877"),c=Object(h["a"])(s["default"],n["a"],n["b"],!1,null,null,null);i["default"]=c.exports},b8d2:function(t,i,e){"use strict";e.r(i);var n=e("d682"),s=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=s.a},d049:function(t,i,e){},d682:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(e("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return o(t)||c(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}function u(t,i,e,n,s,a,h){try{var c=t[a](h),o=c.value}catch(u){return void e(u)}c.done?i(o):Promise.resolve(o).then(n,s)}function l(t){return function(){var i=this,e=arguments;return new Promise(function(n,s){var a=t.apply(i,e);function h(t){u(a,n,s,h,c,"next",t)}function c(t){u(a,n,s,h,c,"throw",t)}h(void 0)})}}var r={props:{value:Object},name:"canvasEdit",data:function(){return{active:!0,ctx1:null,ctx2:null,copyClip:{x:0,y:0,h:310,w:310},clipX:[],clipY:[],x0:0,y0:0,t0:"",v0:0,lineWidth:"",k:""}},watch:{value:function(t){this.$emit("input",t)}},onLoad:function(){},onReady:function(){this.drawing()},methods:{drawing:function(){this.ctx1=t.createCanvasContext("canvas",this),this.ctx2=t.createCanvasContext("copyClip",this),this.ctx1.setLineCap("round")},touchStart:function(t){this.ctx1.beginPath(),this.lineWidth=this.value.lineWidth,this.k=this.value.lineWidth>3?.3:.2,this.t0=(new Date).getTime(),this.v0=0,this.x0=t.touches[0].clientX,this.y0=t.touches[0].clientY},touchMove:function(){var t=l(n.default.mark(function t(i){var e,s,a,h,c,o;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.clipX.push(this.x0),this.clipY.push(this.y0),e=i.touches[0].clientX-this.x0,s=i.touches[0].clientY-this.y0,a=Math.pow(e*e+s*s,.5),h=(new Date).getTime()-this.t0,c=a/h,0===this.value.keenness)this.ctx1.moveTo(this.x0,this.y0),this.ctx1.lineTo(this.x0+e,this.y0+s),this.ctx1.setLineWidth(this.lineWidth),this.ctx1.stroke(),this.ctx1.draw(!0);else for(o=0;o<this.value.keenness;o++)this.ctx1.moveTo(this.x0+e*o/this.value.keenness,this.y0+s*o/this.value.keenness),this.ctx1.lineTo(this.x0+e*(o+1)/this.value.keenness,this.y0+s*(o+1)/this.value.keenness),c-this.v0>=0?(this.lineWidth+=this.k,this.lineWidth>1.5*this.value.lineWidth&&(this.lineWidth=1.5*this.value.lineWidth)):(this.lineWidth-=this.k,this.lineWidth<.25*this.lineWidth&&(this.lineWidth=.25*this.lineWidth)),this.ctx1.setLineWidth(this.lineWidth),this.ctx1.stroke(),this.ctx1.draw(!0);this.x0=i.touches[0].clientX,this.y0=i.touches[0].clientY,this.t0=(new Date).getTime(),this.v0=c;case 8:case"end":return t.stop()}},t,this)}));function i(i){return t.apply(this,arguments)}return i}(),touchEnd:function(t){this.x0=0,this.y0=0,this.t0="",this.v0=0},handleClear:function(){var t=this;this.active=!1,setTimeout(function(){t.active=!0},100)},save:function(){this.getCanvasImage("save")},confirm:function(){this.getCanvasImage("confirm")},getCanvasImage:function(i){var e=this;this.copyClip.x=Math.min.apply(Math,a(this.clipX))-5,this.copyClip.y=Math.min.apply(Math,a(this.clipY))-5,this.copyClip.w=Math.max.apply(Math,a(this.clipX))-this.copyClip.x+5,this.copyClip.h=Math.max.apply(Math,a(this.clipY))-this.copyClip.y+5,this.ctx1.draw(!0,function(){t.canvasToTempFilePath({canvasId:"canvas",success:function(n){e.ctx2.drawImage(n.tempFilePath,-e.copyClip.x,-e.copyClip.y),e.ctx2.draw(!0,function(n){t.canvasToTempFilePath({canvasId:"copyClip",success:function(n){"save"===i?t.saveImageToPhotosAlbum({filePath:n.tempFilePaths}):"confirm"===i&&e.$emit("handleCanvasImage",n.tempFilePath,e.copyClip)}},e)})}},e)})}}};i.default=r}).call(this,e("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/canvasEdit-create-component',
    {
        'pages/index/canvasEdit-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("7eb0"))
        })
    },
    [['pages/index/canvasEdit-create-component']]
]);
