(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/generateImg"],{1857:function(t,e,r){"use strict";(function(t){function r(t){return a(t)||n(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={props:{img:Array,text:Array,canvasH:Number,canvasW:{type:Number,default:720}},data:function(){return{ctx:null,k:""}},onReady:function(){this.k=t.getSystemInfoSync().screenWidth/750,this.ctx=t.createCanvasContext("generate",this)},methods:{px2rpx:function(){if(1===arguments.length)return Math.floor(arguments[0]/this.k);var t=[],e=!0,r=!1,i=void 0;try{for(var n,a=arguments[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;t.push(Math.floor(s/this.k))}}catch(c){r=!0,i=c}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}return t},rpx2px:function(){if(1===arguments.length)return Math.floor(arguments[0]*this.k);var t=[],e=!0,r=!1,i=void 0;try{for(var n,a=arguments[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;t.push(Math.floor(s*this.k))}}catch(c){r=!0,i=c}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}return t},generate:function(){var e,i=this;this.ctx.setFillStyle("#FFFFFF"),(e=this.ctx).fillRect.apply(e,[0,0].concat(r(this.rpx2px(this.canvasW,this.canvasH))));var n=!0,a=!1,s=void 0;try{for(var c,o=this.img[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var h,l,x,u,p,f=c.value;if(this.ctx.save(),f.mirror)(l=this.ctx).translate.apply(l,r(this.rpx2px(f.x+f.w/2,f.y+f.h/2))),this.ctx.scale(-1,1),(x=this.ctx).translate.apply(x,r(this.rpx2px(-f.x-f.w/2,-f.y-f.h/2)));if(f.degrees)(u=this.ctx).translate.apply(u,r(this.rpx2px(f.x+f.w/2,f.y+f.h/2))),this.ctx.rotate(f.degrees*Math.PI/180),(p=this.ctx).translate.apply(p,r(this.rpx2px(-f.x-f.w/2,-f.y-f.h/2)));this.radiusRect.apply(this,r(this.rpx2px(f.x,f.y,f.w,f.h,f.r))),this.ctx.clip(),(h=this.ctx).drawImage.apply(h,[f.src].concat(r(this.rpx2px(f.x,f.y,f.w,f.h)))),this.ctx.restore()}}catch(M){a=!0,s=M}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}var y=!0,d=!1,v=void 0;try{for(var g,T=this.text[Symbol.iterator]();!(y=(g=T.next()).done);y=!0){var m,w=g.value,b="",S=0,k=0;if(w.w=this.rpx2px(w.w),this.ctx.font="normal ".concat(w.weight," ").concat(this.rpx2px(w.size),"px/").concat(this.rpx2px(w.lineHeight),"px sans-serif"),this.ctx.setFillStyle(w.color),this.ctx.setTextBaseline("top"),this.ctx.measureText(w.content).width<=w.w)(m=this.ctx).fillText.apply(m,[w.content].concat(r(this.rpx2px(w.x,w.y)))),w.lineThrough&&this.drawLineThrough(w.x,w.y,w.content,w.color,w.size);else for(var F=0;F<w.content.length;F++)if(b+=w.content[F],this.ctx.measureText(b).width>=w.w){if(S+1===w.maxLineNum){var H;(H=this.ctx).fillText.apply(H,[w.content.substring(k,F-1)+"..."].concat(r(this.rpx2px(w.x,w.y+w.lineHeight*S)),[w.color,w.size])),w.lineThrough&&this.drawLineThrough(w.x,w.y+w.lineHeight*S,w.content.substring(k,F-1),w.color,w.size);break}var A;(A=this.ctx).fillText.apply(A,[w.content.substring(k,F+1)].concat(r(this.rpx2px(w.x,w.y+w.lineHeight*S)))),w.lineThrough&&this.drawLineThrough(w.x,w.y+w.lineHeight*S,w.content.substring(k,F+1),w.color,w.size),k=F+1,S+=1,b=""}else{var L;if(F===w.content.length-1)(L=this.ctx).fillText.apply(L,[b].concat(r(this.rpx2px(w.x,w.y+w.lineHeight*S)))),w.lineThrough&&this.drawLineThrough(w.x,w.y+w.lineHeight*S,b,w.color,w.size)}}}catch(M){d=!0,v=M}finally{try{y||null==T.return||T.return()}finally{if(d)throw v}}this.ctx.draw(!1,function(e){t.canvasToTempFilePath({canvasId:"generate",success:function(t){i.$emit("exportSuccess",t.tempFilePath)}},i)})},radiusRect:function(t,e,r,i,n){(n>r/2||n>i/2)&&(n=Math.min(r,i)/2),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.arcTo(t+r,e,t+r,e+n,n),this.ctx.lineTo(t+r,e),this.ctx.arcTo(t+r,e+i,t+r-n,e+i,n),this.ctx.lineTo(t+r,e+i),this.ctx.arcTo(t,e+i,t,e+i-n,n),this.ctx.lineTo(t,e+i),this.ctx.arcTo(t,e,t+n,e,n),this.ctx.lineTo(t,e)},drawLineThrough:function(t,e,i,n,a){var s,c;this.ctx.beginPath(),(s=this.ctx).moveTo.apply(s,r(this.rpx2px(t,e+a/2))),(c=this.ctx).lineTo.apply(c,r(this.rpx2px(t+this.px2rpx(this.ctx.measureText(i).width),e+a/2))),this.ctx.setStrokeStyle(n),this.ctx.setLineWidth(1.6),this.ctx.stroke()}}};e.default=s}).call(this,r("543d")["default"])},5984:function(t,e,r){"use strict";r.r(e);var i=r("822d"),n=r("8c49");for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var s,c=r("f0c5"),o=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=o.exports},"822d":function(t,e,r){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];r.d(e,"b",function(){return n}),r.d(e,"c",function(){return a}),r.d(e,"a",function(){return i})},"8c49":function(t,e,r){"use strict";r.r(e);var i=r("1857"),n=r.n(i);for(var a in i)"default"!==a&&function(t){r.d(e,t,function(){return i[t]})}(a);e["default"]=n.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/generateImg-create-component',
    {
        'pages/index/generateImg-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("5984"))
        })
    },
    [['pages/index/generateImg-create-component']]
]);
