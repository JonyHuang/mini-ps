{"version":3,"sources":["webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?fb9a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?fd7a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?bbd1","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?56fa","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue"],"names":["props","img","Array","text","canvasH","Number","canvasW","type","default","data","ctx","k","onReady","uni","getSystemInfoSync","screenWidth","createCanvasContext","methods","px2rpx","arguments","length","Math","floor","params","i","push","rpx2px","generate","setFillStyle","fillRect","beginPath","save","mirror","translate","x","w","y","h","scale","degrees","rotate","PI","radiusRect","r","clip","drawImage","src","restore","drawTxt","drawLineNum","drawIndex","font","weight","size","lineHeight","color","setTextBaseline","measureText","content","width","fillText","lineThrough","moveTo","lineTo","setStrokeStyle","setLineWidth","stroke","j","maxLineNum","substring","draw","res","canvasToTempFilePath","canvasId","success","$emit","tempFilePath","min","arcTo"],"mappings":"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","file":"pages/index/generateImg.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./generateImg.vue?vue&type=template&id=323775f0&\"\nvar renderjs\nimport script from \"./generateImg.vue?vue&type=script&lang=js&\"\nexport * from \"./generateImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Temax\\\\G\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('323775f0')) {\n      api.createRecord('323775f0', component.options)\n    } else {\n      api.reload('323775f0', component.options)\n    }\n    module.hot.accept(\"./generateImg.vue?vue&type=template&id=323775f0&\", function () {\n      api.rerender('323775f0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue\"\nexport default component.exports","export * from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=template&id=323775f0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n/* 以下数字的单位以rpx为准 */\nexport default {\n\tprops: {\n\t\timg: Array,\n\t\ttext: Array,\n\t\tcanvasH: Number,\n\t\tcanvasW: {\n\t\t\ttype: Number,\n\t\t\tdefault: 720\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tctx: null,\n\t\t\tk: '' //单位转换因子 unit conversion factor\n\t\t};\n\t},\n\tonReady() {\n\t\tthis.k = uni.getSystemInfoSync().screenWidth / 750\n\t\tthis.ctx = uni.createCanvasContext('generate', this);\n\t},\n\tmethods: {\n\t\t/* 单位转换 */\n\t\tpx2rpx() {\n\t\t\tif (arguments.length === 1)\n\t\t\t\treturn Math.floor(arguments[0] / this.k)\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(Math.floor(i / this.k))\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\trpx2px() {\n\t\t\tif (arguments.length === 1)\n\t\t\t\treturn Math.floor(arguments[0] * this.k)\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(Math.floor(i * this.k))\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\tgenerate() {\n\t\t\tthis.ctx.setFillStyle('#FFFFFF')\n\t\t\tthis.ctx.fillRect(0, 0, ...this.rpx2px(this.canvasW, this.canvasH))\n\t\t\tfor (let i of this.img) {\n\t\t\t\tthis.ctx.beginPath()\n\t\t\t\tthis.ctx.save()\n\t\t\t\tif (i.mirror) {\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.scale(-1, 1)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tif (i.degrees) {\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.rotate(i.degrees * Math.PI / 180)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\n\t\t\t\tthis.radiusRect(...this.rpx2px(i.x, i.y, i.w, i.h, i.r)) //（圆角）矩形路径绘制\n\t\t\t\tthis.ctx.clip()\n\t\t\t\tthis.ctx.drawImage(i.src, ...this.rpx2px(i.x, i.y, i.w, i.h))\n\t\t\t\tthis.ctx.restore()\n\t\t\t}\n\n\t\t\t/* -文字绘制 */\n\n\t\t\tfor (let i of this.text) {\n\t\t\t\tlet drawTxt = '', //当前绘制内容\n\t\t\t\t\tdrawLineNum = 0, //当前行数索引\n\t\t\t\t\tdrawIndex = 0 //当前绘制内容索引\n\t\t\t\ti.w = this.rpx2px(i.w)\n\n\t\t\t\tthis.ctx.font = `${i.weight} ${this.rpx2px(i.size)}px/${this.rpx2px(i.lineHeight)}px sans-serif`\n\t\t\t\tthis.ctx.setFillStyle(i.color)\n\t\t\t\tthis.ctx.setTextBaseline('top')\n\t\t\t\tif (this.ctx.measureText(i.content).width <= i.w) { //只有一行内容\n\t\t\t\t\tthis.ctx.fillText(i.content, ...this.rpx2px(i.x, i.y))\n\t\t\t\t\tif (i.lineThrough) { //情景：存在贯穿线\n\t\t\t\t\t\tthis.ctx.beginPath();\n\t\t\t\t\t\tthis.ctx.moveTo(...this.rpx2px(i.x, i.y + i.size / 2 - 3))\n\t\t\t\t\t\tthis.ctx.lineTo(...this.rpx2px(i.x + this.px2rpx(this.ctx.measureText(i.content).width), i.y + i.size / 2 - 3))\n\t\t\t\t\t\tthis.ctx.setStrokeStyle(i.color)\n\t\t\t\t\t\tthis.ctx.setLineWidth(1.6)\n\t\t\t\t\t\tthis.ctx.stroke()\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < i.content.length; j++) {\n\t\t\t\t\t\tdrawTxt += i.content[j]\n\t\t\t\t\t\tif (this.ctx.measureText(drawTxt).width >= i.w) {\n\t\t\t\t\t\t\tif (drawLineNum === i.maxLineNum) { //情景：多行时最后一行内容超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j - 1) + '...', ...this.rpx2px(i.x, i.y + i.lineHeight *\n\t\t\t\t\t\t\t\t\tdrawLineNum));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else { //情景：多行时最后一行之前的内容\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j + 1), ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t\tdrawIndex = j + 1;\n\t\t\t\t\t\t\t\tdrawLineNum += 1;\n\t\t\t\t\t\t\t\tdrawTxt = ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (j === i.content.length - 1) { //情景：多行时最后一行内容未超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(drawTxt, ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.ctx.draw(false, res => {\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tcanvasId: 'generate',\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tthis.$emit('exportSuccess', res.tempFilePath);\n\t\t\t\t\t},\n\t\t\t\t}, this);\n\t\t\t})\n\t\t},\n\t\t/* 圆角矩形路径 */\n\t\tradiusRect(x, y, w, h, r) {\n\t\t\tif (r > w / 2 || r > h / 2) {\n\t\t\t\tr = Math.min(w, h) / 2\n\t\t\t}\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(x, y); // 将操作点移至左上角\n\t\t\tthis.ctx.arcTo(x + w, y, x + w, y + r, r); // 画右上角的弧\n\t\t\tthis.ctx.lineTo(x + w, y)\n\t\t\tthis.ctx.arcTo(x + w, y + h, x + w - r, y + h, r); // 画右下角的弧\n\t\t\tthis.ctx.lineTo(x + w, y + h)\n\t\t\tthis.ctx.arcTo(x, y + h, x, y + h - r, r); // 画左下角的弧\n\t\t\tthis.ctx.lineTo(x, y + h)\n\t\t\tthis.ctx.arcTo(x, y, x + r, y, r); // 画左上角的弧\n\t\t\tthis.ctx.lineTo(x, y)\n\t\t}\n\t}\n};\n"],"sourceRoot":""}