{"version":3,"sources":["webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?fb9a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?fd7a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?bbd1","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?56fa","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue"],"names":["props","img","Array","text","canvasH","Number","canvasW","type","default","data","ctx","k","onReady","uni","getSystemInfoSync","screenWidth","createCanvasContext","methods","px2rpx","arguments","length","params","i","push","rpx2px","generate","setFillStyle","fillRect","save","degrees","translate","x","w","y","h","rotate","Math","PI","mirror","scale","radiusRect","r","clip","shadow","setShadow","fill","drawImage","src","restore","drawTxt","drawLineNum","drawIndex","font","weight","size","lineHeight","color","setTextBaseline","measureText","content","width","fillText","lineThrough","beginPath","moveTo","lineTo","setStrokeStyle","setLineWidth","stroke","j","maxLineNum","substring","draw","res","canvasToTempFilePath","canvasId","success","$emit","tempFilePath","min","arcTo","closePath"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;;;AAG1D;AACwK;AACxK,gBAAgB,+KAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACzCf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAioB,CAAgB,+nBAAG,EAAC,C;;;;;;;;;;;;4pBCArpB;AACA;AACA;AACA;AACA;AACA;;AAEA,mB;AACe;AACdA,OAAK,EAAE;AACNC,OAAG,EAAEC,KADC;AAENC,QAAI,EAACD,KAFC;AAGNE,WAAO,EAAEC,MAHH;AAINC,WAAO,EAAE;AACRC,UAAI,EAAEF,MADE;AAERG,aAAO,EAAE,GAFD,EAJH,EADO;;;AAUdC,MAVc,kBAUP;AACN,WAAO;AACNC,SAAG,EAAE,IADC;AAENC,OAAC,EAAE,EAFG,CAED;AAFC,KAAP;AAIA,GAfa;AAgBdC,SAhBc,qBAgBJ;AACT,SAAKD,CAAL,GAASE,GAAG,CAACC,iBAAJ,GAAwBC,WAAxB,GAAsC,GAA/C;AACA,SAAKL,GAAL,GAAWG,GAAG,CAACG,mBAAJ,CAAwB,UAAxB,EAAoC,IAApC,CAAX;AACA,GAnBa;AAoBdC,SAAO,EAAE;AACR;AACAC,UAFQ,oBAEC;AACR,UAAIC,SAAS,CAACC,MAAV,KAAqB,CAAzB;AACC,aAAOD,SAAS,CAAC,CAAD,CAAT,GAAe,KAAKR,CAA3B;AACD,UAAIU,MAAM,GAAG,EAAb,CAHQ;AAIR,6BAAcF,SAAd,8HAAyB,KAAhBG,CAAgB;AACxBD,gBAAM,CAACE,IAAP,CAAYD,CAAC,GAAG,KAAKX,CAArB;AACA,SANO;AAOR,aAAOU,MAAP;AACA,KAVO;AAWRG,UAXQ,oBAWC;AACR,UAAIL,SAAS,CAACC,MAAV,KAAqB,CAAzB;AACC,aAAOD,SAAS,CAAC,CAAD,CAAT,GAAe,KAAKR,CAA3B;AACD,UAAIU,MAAM,GAAG,EAAb,CAHQ;AAIR,8BAAcF,SAAd,mIAAyB,KAAhBG,CAAgB;AACxBD,gBAAM,CAACE,IAAP,CAAYD,CAAC,GAAG,KAAKX,CAArB;AACA,SANO;AAOR,aAAOU,MAAP;AACA,KAnBO;AAoBRI,YApBQ,sBAoBG;AACV,WAAKf,GAAL,CAASgB,YAAT,CAAsB,SAAtB;AACA,wBAAKhB,GAAL,EAASiB,QAAT,mBAAkB,CAAlB,EAAqB,CAArB,4BAA2B,KAAKH,MAAL,CAAY,KAAKlB,OAAjB,EAA0B,KAAKF,OAA/B,CAA3B,IAFU;AAGV,8BAAc,KAAKH,GAAnB,mIAAwB,oBAAfqB,CAAe;AACvB,eAAKZ,GAAL,CAASkB,IAAT;;AAEA,cAAIN,CAAC,CAACO,OAAN,EAAe;AACd,+BAAKnB,GAAL,EAASoB,SAAT,sCAAsB,KAAKN,MAAL,CAAYF,CAAC,CAACS,CAAF,GAAMT,CAAC,CAACU,CAAF,GAAM,CAAxB,EAA2BV,CAAC,CAACW,CAAF,GAAMX,CAAC,CAACY,CAAF,GAAM,CAAvC,CAAtB;AACA,iBAAKxB,GAAL,CAASyB,MAAT,CAAgBb,CAAC,CAACO,OAAF,GAAYO,IAAI,CAACC,EAAjB,GAAsB,GAAtC;AACA,+BAAK3B,GAAL,EAASoB,SAAT,sCAAsB,KAAKN,MAAL,CAAY,CAACF,CAAC,CAACS,CAAH,GAAOT,CAAC,CAACU,CAAF,GAAM,CAAzB,EAA4B,CAACV,CAAC,CAACW,CAAH,GAAOX,CAAC,CAACY,CAAF,GAAM,CAAzC,CAAtB;AACA;AACD,cAAGZ,CAAC,CAACgB,MAAL,EAAY;AACX,+BAAK5B,GAAL,EAASoB,SAAT,sCAAsB,KAAKN,MAAL,CAAYF,CAAC,CAACS,CAAF,GAAMT,CAAC,CAACU,CAAF,GAAM,CAAxB,EAA2BV,CAAC,CAACW,CAAF,GAAMX,CAAC,CAACY,CAAF,GAAM,CAAvC,CAAtB;AACA,iBAAKxB,GAAL,CAAS6B,KAAT,CAAe,CAAC,CAAhB,EAAkB,CAAlB;AACA,+BAAK7B,GAAL,EAASoB,SAAT,sCAAsB,KAAKN,MAAL,CAAY,CAACF,CAAC,CAACS,CAAH,GAAOT,CAAC,CAACU,CAAF,GAAM,CAAzB,EAA4B,CAACV,CAAC,CAACW,CAAH,GAAOX,CAAC,CAACY,CAAF,GAAM,CAAzC,CAAtB;AACA;AACD,eAAKM,UAAL,gCAAmB,KAAKhB,MAAL,CAAYF,CAAC,CAACS,CAAd,EAAiBT,CAAC,CAACW,CAAnB,EAAsBX,CAAC,CAACU,CAAxB,EAA2BV,CAAC,CAACY,CAA7B,EAAgCZ,CAAC,CAACmB,CAAlC,CAAnB,GAbuB,CAakC;AACzD,eAAK/B,GAAL,CAASgC,IAAT;AACA,cAAIpB,CAAC,CAACqB,MAAN,EAAc;AACb,iBAAKjC,GAAL,CAASkC,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,SAA5B;AACA,iBAAKlC,GAAL,CAASmC,IAAT;AACA;AACD,6BAAKnC,GAAL,EAASoC,SAAT,oBAAmBxB,CAAC,CAACyB,GAArB,4BAA6B,KAAKvB,MAAL,CAAYF,CAAC,CAACS,CAAd,EAAiBT,CAAC,CAACW,CAAnB,EAAsBX,CAAC,CAACU,CAAxB,EAA2BV,CAAC,CAACY,CAA7B,CAA7B;AACA,eAAKxB,GAAL,CAASsC,OAAT;AACA;;AAED,mBA1BU;;AA4BV,8BAAc,KAAK7C,IAAnB,mIAAyB,KAAhBmB,EAAgB;AACxB,cAAI2B,OAAO,GAAG,EAAd,EAAkB;AACjBC,qBAAW,GAAG,CADf,EACkB;AACjBC,mBAAS,GAAG,CAFb,CADwB,CAGT;AACf7B,YAAC,CAACU,CAAF,GAAM,KAAKR,MAAL,CAAYF,EAAC,CAACU,CAAd,CAAN;;AAEA,eAAKtB,GAAL,CAAS0C,IAAT,aAAmB9B,EAAC,CAAC+B,MAArB,cAA+B,KAAK7B,MAAL,CAAYF,EAAC,CAACgC,IAAd,CAA/B,gBAAwD,KAAK9B,MAAL,CAAYF,EAAC,CAACiC,UAAd,CAAxD;AACA,eAAK7C,GAAL,CAASgB,YAAT,CAAsBJ,EAAC,CAACkC,KAAxB;AACA,eAAK9C,GAAL,CAAS+C,eAAT,CAAyB,KAAzB;AACA,cAAI,KAAK/C,GAAL,CAASgD,WAAT,CAAqBpC,EAAC,CAACqC,OAAvB,EAAgCC,KAAhC,IAAyCtC,EAAC,CAACU,CAA/C,EAAkD,iBAAE;AACnD,+BAAKtB,GAAL,EAASmD,QAAT,oBAAkBvC,EAAC,CAACqC,OAApB,4BAAgC,KAAKnC,MAAL,CAAYF,EAAC,CAACS,CAAd,EAAiBT,EAAC,CAACW,CAAnB,CAAhC;AACA,gBAAIX,EAAC,CAACwC,WAAN,EAAmB,6BAAE;AACpB,mBAAKpD,GAAL,CAASqD,SAAT;AACA,iCAAKrD,GAAL,EAASsD,MAAT,sCAAmB,KAAKxC,MAAL,CAAYF,EAAC,CAACS,CAAd,EAAiBT,EAAC,CAACW,CAAF,GAAMX,EAAC,CAACgC,IAAF,GAAS,CAAf,GAAmB,CAApC,CAAnB;AACA,iCAAK5C,GAAL,EAASuD,MAAT,sCAAmB,KAAKzC,MAAL,CAAYF,EAAC,CAACS,CAAF,GAAM,KAAKb,MAAL,CAAY,KAAKR,GAAL,CAASgD,WAAT,CAAqBpC,EAAC,CAACqC,OAAvB,EAAgCC,KAA5C,CAAlB,EAAsEtC,EAAC,CAACW,CAAF,GAAMX,EAAC,CAACgC,IAAF,GAAS,CAAf,GAAmB,CAAzF,CAAnB;AACA,mBAAK5C,GAAL,CAASwD,cAAT,CAAwB5C,EAAC,CAACkC,KAA1B;AACA,mBAAK9C,GAAL,CAASyD,YAAT,CAAsB,GAAtB;AACA,mBAAKzD,GAAL,CAAS0D,MAAT;AACA;AACD,WAVD,MAUO;AACN,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/C,EAAC,CAACqC,OAAF,CAAUvC,MAA9B,EAAsCiD,CAAC,EAAvC,EAA2C;AAC1CpB,qBAAO,IAAI3B,EAAC,CAACqC,OAAF,CAAUU,CAAV,CAAX;AACA,kBAAI,KAAK3D,GAAL,CAASgD,WAAT,CAAqBT,OAArB,EAA8BW,KAA9B,IAAuCtC,EAAC,CAACU,CAA7C,EAAgD;AAC/C,oBAAIkB,WAAW,KAAK5B,EAAC,CAACgD,UAAtB,EAAkC,kBAAE;AACnC,sCAAK5D,GAAL,EAASmD,QAAT,qBAAkBvC,EAAC,CAACqC,OAAF,CAAUY,SAAV,CAAoBpB,SAApB,EAA+BkB,CAAC,GAAG,CAAnC,IAAwC,KAA1D,4BAAoE,KAAK7C,MAAL,CAAYF,EAAC,CAACS,CAAd,EAAiBT,EAAC,CAACW,CAAF,GAAMX,EAAC,CAACiC,UAAF;AAC1FL,6BADmE,CAApE;AAEA;AACA,iBAJD,MAIO,kBAAE;AACR,sCAAKxC,GAAL,EAASmD,QAAT,qBAAkBvC,EAAC,CAACqC,OAAF,CAAUY,SAAV,CAAoBpB,SAApB,EAA+BkB,CAAC,GAAG,CAAnC,CAAlB,4BAA4D,KAAK7C,MAAL,CAAYF,EAAC,CAACS,CAAd,EAAiBT,EAAC,CAACW,CAAF,GAAMX,EAAC,CAACiC,UAAF,GAAeL,WAAtC,CAA5D;AACAC,2BAAS,GAAGkB,CAAC,GAAG,CAAhB;AACAnB,6BAAW,IAAI,CAAf;AACAD,yBAAO,GAAG,EAAV;AACA;AACD,eAXD,MAWO;AACN,oBAAIoB,CAAC,KAAK/C,EAAC,CAACqC,OAAF,CAAUvC,MAAV,GAAmB,CAA7B,EAAgC,kBAAE;AACjC,sCAAKV,GAAL,EAASmD,QAAT,qBAAkBZ,OAAlB,4BAA8B,KAAKzB,MAAL,CAAYF,EAAC,CAACS,CAAd,EAAiBT,EAAC,CAACW,CAAF,GAAMX,EAAC,CAACiC,UAAF,GAAeL,WAAtC,CAA9B;AACA;AACD;AACD;AACD;AACD,SApES;AAqEV,WAAKxC,GAAL,CAAS8D,IAAT,CAAc,KAAd,EAAqB,UAAAC,GAAG,EAAI;AAC3B5D,WAAG,CAAC6D,oBAAJ,CAAyB;AACxBC,kBAAQ,EAAE,UADc;AAExBC,iBAAO,EAAE,iBAAAH,GAAG,EAAI;AACf,iBAAI,CAACI,KAAL,CAAW,eAAX,EAA4BJ,GAAG,CAACK,YAAhC;AACA,WAJuB,EAAzB;AAKG,aALH;AAMA,OAPD;;;AAUA,KAnGO;AAoGR;AACA;AACAtC,cAtGQ,sBAsGGT,CAtGH,EAsGME,CAtGN,EAsGSD,CAtGT,EAsGYE,CAtGZ,EAsGeO,CAtGf,EAsGkB;AACzB,UAAIA,CAAC,GAAGT,CAAC,GAAG,CAAR,IAAaS,CAAC,GAAGP,CAAC,GAAG,CAAzB,EAA4B;AAC3BO,SAAC,GAAGL,IAAI,CAAC2C,GAAL,CAAS/C,CAAT,EAAYE,CAAZ,IAAiB,CAArB;AACA;AACD,WAAKxB,GAAL,CAASqD,SAAT;AACA,WAAKrD,GAAL,CAASsD,MAAT,CAAgBjC,CAAC,GAAGU,CAApB,EAAuBR,CAAvB,EALyB,CAKE;AAC3B,WAAKvB,GAAL,CAASsE,KAAT,CAAejD,CAAC,GAAGC,CAAnB,EAAsBC,CAAtB,EAAyBF,CAAC,GAAGC,CAA7B,EAAgCC,CAAC,GAAGQ,CAApC,EAAuCA,CAAvC,EANyB,CAMkB;AAC3C,WAAK/B,GAAL,CAASsE,KAAT,CAAejD,CAAC,GAAGC,CAAnB,EAAsBC,CAAC,GAAGC,CAA1B,EAA6BH,CAAC,GAAGC,CAAJ,GAAQS,CAArC,EAAwCR,CAAC,GAAGC,CAA5C,EAA+CO,CAA/C,EAPyB,CAO0B;AACnD,WAAK/B,GAAL,CAASsE,KAAT,CAAejD,CAAf,EAAkBE,CAAC,GAAGC,CAAtB,EAAyBH,CAAzB,EAA4BE,CAAC,GAAGC,CAAJ,GAAQO,CAApC,EAAuCA,CAAvC,EARyB,CAQkB;AAC3C,WAAK/B,GAAL,CAASsE,KAAT,CAAejD,CAAf,EAAkBE,CAAlB,EAAqBF,CAAC,GAAGU,CAAzB,EAA4BR,CAA5B,EAA+BQ,CAA/B,EATyB,CASU;AACnC,WAAK/B,GAAL,CAASuE,SAAT;AACA,KAjHO,EApBK,E","file":"pages/index/generateImg.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./generateImg.vue?vue&type=template&id=323775f0&\"\nvar renderjs\nimport script from \"./generateImg.vue?vue&type=script&lang=js&\"\nexport * from \"./generateImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Temax\\\\G\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('323775f0')) {\n      api.createRecord('323775f0', component.options)\n    } else {\n      api.reload('323775f0', component.options)\n    }\n    module.hot.accept(\"./generateImg.vue?vue&type=template&id=323775f0&\", function () {\n      api.rerender('323775f0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue\"\nexport default component.exports","export * from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=template&id=323775f0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n/* 以下数字的单位以rpx为准 */\nexport default {\n\tprops: {\n\t\timg: Array,\n\t\ttext:Array,\n\t\tcanvasH: Number,\n\t\tcanvasW: {\n\t\t\ttype: Number,\n\t\t\tdefault: 720\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tctx: null,\n\t\t\tk: ''//单位转换因子 unit conversion factor\n\t\t};\n\t},\n\tonReady() {\n\t\tthis.k = uni.getSystemInfoSync().screenWidth / 750\n\t\tthis.ctx = uni.createCanvasContext('generate', this);\n\t},\n\tmethods: {\n\t\t/* 单位转换 */\n\t\tpx2rpx() {\n\t\t\tif (arguments.length === 1)\n\t\t\t\treturn arguments[0] / this.k\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(i / this.k)\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\trpx2px() {\n\t\t\tif (arguments.length === 1)\n\t\t\t\treturn arguments[0] * this.k\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(i * this.k)\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\tgenerate() {\n\t\t\tthis.ctx.setFillStyle('#FFFFFF')\n\t\t\tthis.ctx.fillRect(0, 0, ...this.rpx2px(this.canvasW, this.canvasH))\n\t\t\tfor (let i of this.img) {\n\t\t\t\tthis.ctx.save()\n\n\t\t\t\tif (i.degrees) {\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.rotate(i.degrees * Math.PI / 180)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tif(i.mirror){\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.scale(-1,1)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tthis.radiusRect(...this.rpx2px(i.x, i.y, i.w, i.h, i.r)) //（圆角）矩形路径绘制\n\t\t\t\tthis.ctx.clip()\n\t\t\t\tif (i.shadow) {\n\t\t\t\t\tthis.ctx.setShadow(3, 5, 4, '#CDCDCD')\n\t\t\t\t\tthis.ctx.fill();\n\t\t\t\t}\n\t\t\t\tthis.ctx.drawImage(i.src, ...this.rpx2px(i.x, i.y, i.w, i.h))\n\t\t\t\tthis.ctx.restore()\n\t\t\t}\n\n\t\t\t/* -文字绘制 */\n\n\t\t\tfor (let i of this.text) {\n\t\t\t\tlet drawTxt = '', //当前绘制内容\n\t\t\t\t\tdrawLineNum = 0, //当前行数索引\n\t\t\t\t\tdrawIndex = 0 //当前绘制内容索引\n\t\t\t\ti.w = this.rpx2px(i.w)\n\n\t\t\t\tthis.ctx.font = `${i.weight} ${this.rpx2px(i.size)}px/${this.rpx2px(i.lineHeight)}px sans-serif`\n\t\t\t\tthis.ctx.setFillStyle(i.color)\n\t\t\t\tthis.ctx.setTextBaseline('top')\n\t\t\t\tif (this.ctx.measureText(i.content).width <= i.w) { //只有一行内容\n\t\t\t\t\tthis.ctx.fillText(i.content, ...this.rpx2px(i.x, i.y))\n\t\t\t\t\tif (i.lineThrough) { //情景：存在贯穿线\n\t\t\t\t\t\tthis.ctx.beginPath();\n\t\t\t\t\t\tthis.ctx.moveTo(...this.rpx2px(i.x, i.y + i.size / 2 - 3))\n\t\t\t\t\t\tthis.ctx.lineTo(...this.rpx2px(i.x + this.px2rpx(this.ctx.measureText(i.content).width), i.y + i.size / 2 - 3))\n\t\t\t\t\t\tthis.ctx.setStrokeStyle(i.color)\n\t\t\t\t\t\tthis.ctx.setLineWidth(1.6)\n\t\t\t\t\t\tthis.ctx.stroke()\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < i.content.length; j++) {\n\t\t\t\t\t\tdrawTxt += i.content[j]\n\t\t\t\t\t\tif (this.ctx.measureText(drawTxt).width >= i.w) {\n\t\t\t\t\t\t\tif (drawLineNum === i.maxLineNum) { //情景：多行时最后一行内容超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j - 1) + '...', ...this.rpx2px(i.x, i.y + i.lineHeight *\n\t\t\t\t\t\t\t\t\tdrawLineNum));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else { //情景：多行时最后一行之前的内容\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j + 1), ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t\tdrawIndex = j + 1;\n\t\t\t\t\t\t\t\tdrawLineNum += 1;\n\t\t\t\t\t\t\t\tdrawTxt = ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (j === i.content.length - 1) { //情景：多行时最后一行内容未超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(drawTxt, ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.ctx.draw(false, res => {\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tcanvasId: 'generate',\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tthis.$emit('exportSuccess', res.tempFilePath);\n\t\t\t\t\t},\n\t\t\t\t}, this);\n\t\t\t})\n\n\n\t\t},\n\t\t/* 获取canvas图片路径 */\n\t\t/* 圆角矩形路径 */\n\t\tradiusRect(x, y, w, h, r) {\n\t\t\tif (r > w / 2 || r > h / 2) {\n\t\t\t\tr = Math.min(w, h) / 2\n\t\t\t}\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(x + r, y); // 将操作点移至左上角\n\t\t\tthis.ctx.arcTo(x + w, y, x + w, y + r, r); // 画右上角的弧        \n\t\t\tthis.ctx.arcTo(x + w, y + h, x + w - r, y + h, r); // 画右下角的弧\n\t\t\tthis.ctx.arcTo(x, y + h, x, y + h - r, r); // 画左下角的弧\n\t\t\tthis.ctx.arcTo(x, y, x + r, y, r); // 画左上角的弧\n\t\t\tthis.ctx.closePath();\n\t\t}\n\t}\n};\n"],"sourceRoot":""}