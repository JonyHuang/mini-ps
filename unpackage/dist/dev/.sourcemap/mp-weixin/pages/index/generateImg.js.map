{"version":3,"sources":["webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?fb9a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?fd7a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?bbd1","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue?56fa","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue"],"names":["props","img","Array","text","canvasH","Number","canvasW","type","default","data","ctx","k","onReady","uni","getSystemInfoSync","screenWidth","createCanvasContext","methods","px2rpx","arguments","length","Math","floor","params","i","push","rpx2px","generate","setFillStyle","fillRect","save","mirror","translate","x","w","y","h","scale","degrees","rotate","PI","radiusRect","r","clip","drawImage","src","restore","drawTxt","drawLineNum","drawIndex","font","weight","size","lineHeight","color","setTextBaseline","measureText","content","width","fillText","lineThrough","drawLineThrough","j","maxLineNum","substring","draw","res","canvasToTempFilePath","canvasId","success","$emit","tempFilePath","min","beginPath","moveTo","arcTo","lineTo","setStrokeStyle","setLineWidth","stroke"],"mappings":"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","file":"pages/index/generateImg.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./generateImg.vue?vue&type=template&id=323775f0&\"\nvar renderjs\nimport script from \"./generateImg.vue?vue&type=script&lang=js&\"\nexport * from \"./generateImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Temax\\\\G\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('323775f0')) {\n      api.createRecord('323775f0', component.options)\n    } else {\n      api.reload('323775f0', component.options)\n    }\n    module.hot.accept(\"./generateImg.vue?vue&type=template&id=323775f0&\", function () {\n      api.rerender('323775f0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"W/TensionMax/mini-ps-uni-app/pages/index/generateImg.vue\"\nexport default component.exports","export * from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=template&id=323775f0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./generateImg.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\n/* 以下数字的单位以rpx为准 */\nexport default {\n\tprops: {\n\t\timg: Array,\n\t\ttext: Array,\n\t\tcanvasH: Number,\n\t\tcanvasW: {\n\t\t\ttype: Number,\n\t\t\tdefault: 720\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tctx: null,\n\t\t\tk: '' //单位转换因子 unit conversion factor\n\t\t};\n\t},\n\tonReady() {\n\t\tthis.k = uni.getSystemInfoSync().screenWidth / 750\n\t\tthis.ctx = uni.createCanvasContext('generate', this);\n\t},\n\tmethods: {\n\t\t/* 单位转换 */\n\t\tpx2rpx() {\n\t\t\tif (arguments.length === 1)\n\t\t\t\treturn Math.floor(arguments[0] / this.k)\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(Math.floor(i / this.k))\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\trpx2px() {\n\t\t\tif (arguments.length === 1)\n\t\t\t\treturn Math.floor(arguments[0] * this.k)\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(Math.floor(i * this.k))\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\tgenerate() {\n\t\t\tthis.ctx.setFillStyle('#FFFFFF')\n\t\t\tthis.ctx.fillRect(0, 0, ...this.rpx2px(this.canvasW, this.canvasH))\n\t\t\tfor (let i of this.img) {\n\t\t\t\tthis.ctx.save()\n\t\t\t\tif (i.mirror) {\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.scale(-1, 1)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tif (i.degrees) {\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.rotate(i.degrees * Math.PI / 180)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tthis.radiusRect(...this.rpx2px(i.x, i.y, i.w, i.h, i.r)) //（圆角）矩形路径绘制\n\t\t\t\tthis.ctx.clip()\n\t\t\t\tthis.ctx.drawImage(i.src, ...this.rpx2px(i.x, i.y, i.w, i.h))\n\t\t\t\tthis.ctx.restore()\n\t\t\t}\n\n\t\t\t/* -文字绘制 */\n\n\t\t\tfor (let i of this.text) {\n\t\t\t\tlet drawTxt = '', //当前绘制内容\n\t\t\t\t\tdrawLineNum = 0, //当前行数索引\n\t\t\t\t\tdrawIndex = 0 //当前绘制内容索引\n\t\t\t\ti.w = this.rpx2px(i.w)\n\n\t\t\t\tthis.ctx.font = `normal ${i.weight} ${this.rpx2px(i.size)}px/${this.rpx2px(i.lineHeight)}px sans-serif`\n\t\t\t\tthis.ctx.setFillStyle(i.color)\n\t\t\t\tthis.ctx.setTextBaseline('top')\n\t\t\t\tif (this.ctx.measureText(i.content).width <= i.w) { //只有一行内容\n\t\t\t\t\tthis.ctx.fillText(i.content, ...this.rpx2px(i.x, i.y))\n\t\t\t\t\tif (i.lineThrough) { //情景：存在贯穿线\n\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y, i.content, i.color, i.size)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < i.content.length; j++) {\n\t\t\t\t\t\tdrawTxt += i.content[j]\n\t\t\t\t\t\tif (this.ctx.measureText(drawTxt).width >= i.w) {\n\t\t\t\t\t\t\tif (drawLineNum + 1 === i.maxLineNum) { //多行时最后一行内容超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j - 1) + '...', ...this.rpx2px(i.x, i.y + i.lineHeight *\n\t\t\t\t\t\t\t\t\t\tdrawLineNum), i.color, i.size);\n\t\t\t\t\t\t\t\tif (i.lineThrough) {\n\t\t\t\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y + i.lineHeight * drawLineNum, i.content.substring(drawIndex, j - 1), i.color, i\n\t\t\t\t\t\t\t\t\t\t\t.size)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else { //多行时最后一行内容之前的内容\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j + 1), ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t\tif (i.lineThrough) {\n\t\t\t\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y + i.lineHeight * drawLineNum, i.content.substring(drawIndex, j + 1), i.color, i\n\t\t\t\t\t\t\t\t\t\t\t.size)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdrawIndex = j + 1;\n\t\t\t\t\t\t\t\tdrawLineNum += 1;\n\t\t\t\t\t\t\t\tdrawTxt = ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (j === i.content.length - 1) { //情景：多行时最后一行内容未超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(drawTxt, ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t\tif (i.lineThrough) {\n\t\t\t\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y + i.lineHeight * drawLineNum, drawTxt, i.color, i.size)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.ctx.draw(false, res => {\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tcanvasId: 'generate',\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tthis.$emit('exportSuccess', res.tempFilePath);\n\t\t\t\t\t},\n\t\t\t\t}, this);\n\t\t\t})\n\t\t},\n\t\t/* 圆角矩形路径 */\n\t\tradiusRect(x, y, w, h, r) {\n\t\t\tif (r > w / 2 || r > h / 2) {\n\t\t\t\tr = Math.min(w, h) / 2\n\t\t\t}\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(x, y); // 将操作点移至左上角\n\t\t\tthis.ctx.arcTo(x + w, y, x + w, y + r, r); // 画右上角的弧\n\t\t\tthis.ctx.lineTo(x + w, y)\n\t\t\tthis.ctx.arcTo(x + w, y + h, x + w - r, y + h, r); // 画右下角的弧\n\t\t\tthis.ctx.lineTo(x + w, y + h)\n\t\t\tthis.ctx.arcTo(x, y + h, x, y + h - r, r); // 画左下角的弧\n\t\t\tthis.ctx.lineTo(x, y + h)\n\t\t\tthis.ctx.arcTo(x, y, x + r, y, r); // 画左上角的弧\n\t\t\tthis.ctx.lineTo(x, y)\n\t\t},\n\t\tdrawLineThrough(x, y, content, color, size) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(...this.rpx2px(x, y + size / 2))\n\t\t\tthis.ctx.lineTo(...this.rpx2px(x + this.px2rpx(this.ctx.measureText(content).width), y + size / 2))\n\t\t\tthis.ctx.setStrokeStyle(color)\n\t\t\tthis.ctx.setLineWidth(1.6)\n\t\t\tthis.ctx.stroke()\n\t\t}\n\t}\n};\n"],"sourceRoot":""}