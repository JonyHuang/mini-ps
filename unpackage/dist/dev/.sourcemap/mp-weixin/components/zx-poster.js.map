{"version":3,"sources":["webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/components/zx-poster.vue?c307","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/components/zx-poster.vue?6398","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/components/zx-poster.vue?191a","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/components/zx-poster.vue?c6f9","webpack:///C:/Temax/W/TensionMax/mini-ps-uni-app/components/zx-poster.vue"],"names":["props","canvasW","type","Number","default","canvasH","img","Array","text","data","ctx","k","onReady","uni","getSystemInfoSync","screenWidth","createCanvasContext","methods","px2rpx","arguments","length","Math","floor","params","i","push","rpx2px","generate","setFillStyle","fillRect","getImageInfo","src","path","save","mirror","translate","x","w","y","h","scale","degrees","rotate","PI","radiusRect","r","clip","drawImage","restore","drawTxt","drawLineNum","drawIndex","font","weight","size","lineHeight","color","setTextBaseline","measureText","content","width","fillText","lineThrough","drawLineThrough","j","maxLineNum","substring","draw","min","beginPath","moveTo","arcTo","lineTo","setStrokeStyle","setLineWidth","stroke"],"mappings":"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","file":"components/zx-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./zx-poster.vue?vue&type=template&id=7057d46e&\"\nvar renderjs\nimport script from \"./zx-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./zx-poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Temax\\\\G\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7057d46e')) {\n      api.createRecord('7057d46e', component.options)\n    } else {\n      api.reload('7057d46e', component.options)\n    }\n    module.hot.accept(\"./zx-poster.vue?vue&type=template&id=7057d46e&\", function () {\n      api.rerender('7057d46e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"W/TensionMax/mini-ps-uni-app/components/zx-poster.vue\"\nexport default component.exports","export * from \"-!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zx-poster.vue?vue&type=template&id=7057d46e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zx-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../G/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zx-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n\nexport default {\n\tprops: {\n\t\tcanvasW: {\n\t\t\ttype: Number,\n\t\t\tdefault: 720\n\t\t},\n\t\tcanvasH: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1000\n\t\t},\n\t\timg: Array,\n\t\ttext: Array,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tctx: null,\n\t\t\tk: '' //单位转换因子 unit conversion factor\n\t\t};\n\t},\n\tonReady() {\n\t\tthis.k = uni.getSystemInfoSync().screenWidth / 750\n\t\tthis.ctx = uni.createCanvasContext('generate', this);\n\t},\n\tmethods: {\n\t\t/* 单位转换 */\n\t\tpx2rpx() {\n\t\t\t//当转换的参数只有一个时直接返回数值\n\t\t\t//当不为一个时返回数组，然后用spread语法将其展开为几个参数\n\t\t\t//Math.floor()是为了防止在安卓机上造成的数据紊乱，开发者工具无此bug\n\t\t\tif (arguments.length === 1) return Math.floor(arguments[0] / this.k)\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(Math.floor(i / this.k))\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\trpx2px() {\n\t\t\tif (arguments.length === 1) return Math.floor(arguments[0] * this.k)\n\t\t\tlet params = []\n\t\t\tfor (let i of arguments) {\n\t\t\t\tparams.push(Math.floor(i * this.k))\n\t\t\t}\n\t\t\treturn params\n\t\t},\n\t\tasync generate() {\n\t\t\tthis.ctx.setFillStyle('#FFFFFF')\n\t\t\tthis.ctx.fillRect(0, 0, ...this.rpx2px(this.canvasW, this.canvasH)) //绘制背景\n\t\t\t/* 图片绘制 */\n\t\t\tfor (let i of this.img) { //for循环绘制图片\n\t\t\t\ti.src = (await uni.getImageInfo({\n\t\t\t\t\tsrc: i.src\n\t\t\t\t}))[1].path; //获取图片临时路径\n\t\t\t\tthis.ctx.save() //保存当前绘制内容\n\t\t\t\tif (i.mirror) { //如果设置镜像\n\t\t\t\t\t//因为canvas的translate属性是基于原点（初始原点为右上角）变化\n\t\t\t\t\t//所以需要先将原点移动至图片中心，变化后再还原\n\t\t\t\t\t//旋转变化同理\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.scale(-1, 1)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tif (i.degrees) { //如果设置旋转\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(i.x + i.w / 2, i.y + i.h / 2))\n\t\t\t\t\tthis.ctx.rotate(i.degrees * Math.PI / 180)\n\t\t\t\t\tthis.ctx.translate(...this.rpx2px(-i.x - i.w / 2, -i.y - i.h / 2))\n\t\t\t\t}\n\t\t\t\tthis.radiusRect(...this.rpx2px(i.x, i.y, i.w, i.h, i.r)) //圆角或矩形路径绘制\n\t\t\t\tthis.ctx.clip() //裁剪\n\t\t\t\tthis.ctx.drawImage(i.src, ...this.rpx2px(i.x, i.y, i.w, i.h))\n\t\t\t\tthis.ctx.restore() //恢复非裁剪区域\n\t\t\t}\n\n\t\t\t/* 文字绘制 */\n\t\t\tfor (let i of this.text) {\n\t\t\t\tlet drawTxt = '', //当前绘制内容\n\t\t\t\t\tdrawLineNum = 0, //当前行数索引\n\t\t\t\t\tdrawIndex = 0 //当前绘制内容索引\n\t\t\t\ti.w = this.rpx2px(i.w)\n\t\t\t\t//设置文字属性\n\t\t\t\tthis.ctx.font = `normal ${i.weight} ${this.rpx2px(i.size)}px/${this.rpx2px(i.lineHeight)}px sans-serif`\n\t\t\t\tthis.ctx.setFillStyle(i.color)\n\t\t\t\tthis.ctx.setTextBaseline('top')\n\t\t\t\tif (this.ctx.measureText(i.content).width <= i.w) { //只有一行内容时\n\t\t\t\t\tthis.ctx.fillText(i.content, ...this.rpx2px(i.x, i.y))\n\t\t\t\t\tif (i.lineThrough) { //若存在贯穿线\n\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y, i.content, i.color, i.size)\n\t\t\t\t\t}\n\t\t\t\t} else { //有多行内容时\n\t\t\t\t\tfor (let j = 0; j < i.content.length; j++) {\n\t\t\t\t\t\tdrawTxt += i.content[j]\n\t\t\t\t\t\tif (this.ctx.measureText(drawTxt).width >= i.w) {\n\t\t\t\t\t\t\tif (drawLineNum + 1 === i.maxLineNum) { //多行时最后一行内容超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j - 1) + '...', ...this.rpx2px(i.x, i.y + i.lineHeight *\n\t\t\t\t\t\t\t\t\tdrawLineNum), i.color, i.size);\n\t\t\t\t\t\t\t\tif (i.lineThrough) {\n\t\t\t\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y + i.lineHeight * drawLineNum, i.content.substring(drawIndex, j - 1), i.color, i\n\t\t\t\t\t\t\t\t\t\t\t.size)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} else { //多行时最后一行内容之前的内容\n\t\t\t\t\t\t\t\tthis.ctx.fillText(i.content.substring(drawIndex, j + 1), ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t\tif (i.lineThrough) {\n\t\t\t\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y + i.lineHeight * drawLineNum, i.content.substring(drawIndex, j + 1), i.color, i\n\t\t\t\t\t\t\t\t\t\t\t.size)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdrawIndex = j + 1;\n\t\t\t\t\t\t\t\tdrawLineNum += 1;\n\t\t\t\t\t\t\t\tdrawTxt = ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (j === i.content.length - 1) { //当多行时最后一行内容未超过边界\n\t\t\t\t\t\t\t\tthis.ctx.fillText(drawTxt, ...this.rpx2px(i.x, i.y + i.lineHeight * drawLineNum));\n\t\t\t\t\t\t\t\tif (i.lineThrough) {\n\t\t\t\t\t\t\t\t\tthis.drawLineThrough(i.x, i.y + i.lineHeight * drawLineNum, drawTxt, i.color, i.size)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.ctx.draw(true)\n\t\t},\n\t\t/* 圆角矩形路径 */\n\t\tradiusRect(x, y, w, h, r) {\n\t\t\tif (r > w / 2 || r > h / 2) {\n\t\t\t\tr = Math.min(w, h) / 2\n\t\t\t}\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(x, y); // 将操作点移至左上角\n\t\t\tthis.ctx.arcTo(x + w, y, x + w, y + r, r); // 画右上角的弧\n\t\t\tthis.ctx.lineTo(x + w, y) //可省略，但由于安卓真机的小程序bug，留之，下同。\n\t\t\tthis.ctx.arcTo(x + w, y + h, x + w - r, y + h, r); // 画右下角的弧\n\t\t\tthis.ctx.lineTo(x + w, y + h) //可省略\n\t\t\tthis.ctx.arcTo(x, y + h, x, y + h - r, r); // 画左下角的弧\n\t\t\tthis.ctx.lineTo(x, y + h) //可省略\n\t\t\tthis.ctx.arcTo(x, y, x + r, y, r); // 画左上角的弧\n\t\t\tthis.ctx.lineTo(x, y) //可省略\n\t\t\t// this.ctx.closePath()\n\t\t},\n\t\tdrawLineThrough(x, y, content, color, size) {\n\t\t\tthis.ctx.beginPath();\n\t\t\tthis.ctx.moveTo(...this.rpx2px(x, y + size / 2))\n\t\t\tthis.ctx.lineTo(...this.rpx2px(x + this.px2rpx(this.ctx.measureText(content).width), y + size / 2))\n\t\t\tthis.ctx.setStrokeStyle(color)\n\t\t\tthis.ctx.setLineWidth(1.6)\n\t\t\tthis.ctx.stroke()\n\t\t}\n\t}\n};\n"],"sourceRoot":""}